<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="css/styles.css" rel="stylesheet" />
    <title>Contact Manager</title>
  </head>
  <body>
    <div id="headerBar">
      <div id="logoIcon">
        <img
          src="./images/IT+Security+Icon+White+2.png"
          alt="security icon"
          id="logo"
        />
        <h1>Contact Manager</h1>
      </div>
      <div class="navBar">
        <a href="./contacts.html">Home</a>
        <a
          target="_blank"
          href="https://github.com/WhitlockAdam/SmallProject-Group27"
          >Github</a
        >
        <a href="">About</a>
      </div>
      <h3 id="welcomeMessage"></h3>

      <script>
          // Function to make a GET request to your login.php script
          function getUserInfo() {
              var xhr = new XMLHttpRequest();
              xhr.open("GET", "Login.php", true);
              xhr.onreadystatechange = function () {
                  if (xhr.readyState === XMLHttpRequest.DONE) {
                      if (xhr.status === 200) {
                          var data = JSON.parse(xhr.responseText);
                          if (data.error === "") {
                              displayWelcomeMessage(data.firstName);
                          } else {
                              alert("Error: " + data.error);
                          }
                      } else {
                          alert("Error fetching user information");
                      }
                  }
              };
              xhr.send();
          }
      
          // Function to display the welcome message with the user's first name
          function displayWelcomeMessage(firstName) {
              document.getElementById('welcomeMessage').textContent = "Welcome " + firstName + "!";
          }
      
          // Call the function to get user info
          getUserInfo();
      </script>
    </div>

    <div id="contactTableContainer">
      <table class="contactTable">
        <thead>
          <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone Number</th>
            <th>Address</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Adam</td>
            <td>Whitlock</td>
            <td>adamkwhitlock@gmail.com</td>
            <td>928-301-7112</td>
            <td>4260 Spoleto Circle, Apt 302</td>
          </tr>
          <tr>
            <td>Adam</td>
            <td>Whitlock</td>
            <td>adamkwhitlock@gmail.com</td>
            <td>928-301-7112</td>
            <td>4260 Spoleto Circle, Apt 302</td>
          </tr>
        </tbody>
      </table>
    </div>
  </body>
</html>
